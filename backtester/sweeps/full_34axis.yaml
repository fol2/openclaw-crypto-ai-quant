# Full 34-axis TPE sweep spec
# Usage: mei-backtester sweep --gpu --allow-unsafe-gpu-sweep --tpe --tpe-trials 500000 --tpe-batch 4096 --sweep-spec sweeps/full_34axis.yaml
#
# Grid equivalent: 2.71e+24 combos (impossible)
# TPE 500K trials with batch=4096: ~4.4s per interval
#
# 14 indicator axes + 20 trade axes
# TPE samples continuously between min/max and rounds integer axes

initial_balance: 10000.0
lookback: 200

axes:
  # ═══════════════════════════════════════════════════════════════
  # INDICATOR AXES (14) — require GPU indicator kernel recomputation
  # ═══════════════════════════════════════════════════════════════
  - path: indicators.ema_fast_window
    values: [5, 6, 7, 8, 9, 10, 12, 14, 16, 18, 20]
  - path: indicators.ema_slow_window  # combos with fast>=slow are auto-skipped (degenerate guard)
    values: [10, 15, 20, 25, 30, 35, 40, 45, 50]
  - path: indicators.adx_window
    values: [8, 10, 12, 14, 16, 18]
  - path: indicators.bb_window
    values: [10, 15, 20, 25, 30]
  - path: indicators.atr_window
    values: [10, 12, 14, 16, 18, 20]
  - path: indicators.rsi_window
    values: [10, 12, 14, 16, 18, 20]
  - path: indicators.bb_width_avg_window
    values: [15, 20, 25, 30, 35, 40, 45, 50]
  - path: indicators.vol_sma_window
    values: [10, 15, 20, 25, 30]
  - path: indicators.vol_trend_window
    values: [3, 4, 5, 6, 7, 8, 9, 10]
  - path: indicators.stoch_rsi_window
    values: [10, 12, 14, 16, 18, 20]
  - path: indicators.stoch_rsi_smooth1
    values: [2, 3, 4, 5]
  - path: indicators.stoch_rsi_smooth2
    values: [2, 3, 4, 5]
  - path: thresholds.entry.ave_avg_atr_window
    values: [30, 40, 50, 60, 70, 80]
  - path: thresholds.entry.slow_drift_slope_window
    values: [10, 15, 20, 25, 30, 35, 40]

  # ═══════════════════════════════════════════════════════════════
  # TRADE AXES (20) — cheap, share indicator data
  # ═══════════════════════════════════════════════════════════════

  # Core sizing
  - path: trade.allocation_pct
    values: [0.05, 0.10, 0.15, 0.20, 0.25, 0.30]
  - path: trade.sl_atr_mult
    values: [1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0]
  - path: trade.tp_atr_mult
    values: [3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0]
  - path: trade.leverage
    values: [1.0, 2.0, 3.0, 4.0, 5.0]

  # Trailing
  - path: trade.trailing_start_atr
    values: [0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0]
  - path: trade.trailing_distance_atr
    values: [0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2]

  # ATR floor
  - path: trade.min_atr_pct
    values: [0.0, 0.001, 0.002, 0.003, 0.004, 0.005]

  # Confidence / entry
  - path: trade.entry_min_confidence
    values: [0.0, 1.0, 2.0]  # 0=low, 1=medium, 2=high

  # Toggles
  - path: trade.enable_breakeven_stop
    values: [0.0, 1.0]
  - path: trade.enable_dynamic_sizing
    values: [0.0, 1.0]

  # Pyramiding
  - path: trade.max_adds_per_symbol
    values: [0.0, 1.0, 2.0, 3.0]
  - path: trade.add_fraction_of_base_margin
    values: [0.25, 0.50, 0.75, 1.00]

  # Cooldown
  - path: trade.reentry_cooldown_min_mins
    values: [30.0, 45.0, 60.0, 75.0, 90.0]

  # Entry thresholds
  - path: thresholds.entry.min_adx
    values: [10.0, 15.0, 20.0, 25.0]
  - path: thresholds.entry.max_dist_ema_fast
    values: [0.02, 0.03, 0.04, 0.05]

  # Dynamic leverage
  - path: trade.leverage_medium
    values: [2.0, 3.0, 4.0, 5.0]

  # Sizing
  - path: trade.confidence_mult_medium
    values: [0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]

  # Breakeven
  - path: trade.breakeven_start_atr
    values: [0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]

  # Filters
  - path: filters.enable_ranging_filter
    values: [0.0, 1.0]
  - path: filters.require_volume_confirmation
    values: [0.0, 1.0]
